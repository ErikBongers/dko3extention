{
  "version": 3,
  "sources": ["../typescript/serviceworker.ts"],
  "sourcesContent": ["import {Actions, ExtensionRequest} from \"./globals\";\r\n\r\nlet defaultOptions = {\r\n    showDebug: true,\r\n    showNotAssignedClasses: true,\r\n    markOtherAcademies: true,\r\n    otherAcademies: \"\"\r\n};\r\n\r\nchrome.runtime.onInstalled.addListener(() => {\r\n    console.log(\"installed.\");\r\n    chrome.storage.sync.get(\r\n        defaultOptions,\r\n        (items) => {\r\n            chrome.storage.sync.set(\r\n                {...defaultOptions, ...items},\r\n                () => {\r\n                    console.log(\"Options initialized\");\r\n                }\r\n            );\r\n        }\r\n    );\r\n\r\n});\r\n\r\nlet global_request = {};\r\n\r\nchrome.runtime.onMessage.addListener(\r\n    function(request: ExtensionRequest, sender, sendResponse) {\r\n        console.log(\"received \");\r\n        console.log(request);\r\n        switch (request.action) { //todo: make a shared type with content generated.\r\n            case Actions.OpenTab:\r\n                let url = chrome.runtime.getURL(\"resources/blank.html\");\r\n                // chrome.storage.session.set({ blank_html: request})\r\n                //     .then(() => {\r\n                //         console.log(\"Opening \" + url);\r\n                //     });\r\n                global_request = request;\r\n                chrome.tabs.create({url}).then(tab => {\r\n                    console.log(\"tab created.\");\r\n                });\r\n                break;\r\n            case Actions.GetTabData:\r\n                console.log(\"getTabData:\")\r\n                // chrome.storage.session.get([\"blank_html\"]).then(result => {\r\n                // });\r\n                sendResponse(global_request);\r\n                break;\r\n        }\r\n    }\r\n);\r\n"],
  "mappings": ";;AAEA,MAAI,iBAAiB;AAAA,IACjB,WAAW;AAAA,IACX,wBAAwB;AAAA,IACxB,oBAAoB;AAAA,IACpB,gBAAgB;AAAA,EACpB;AAEA,SAAO,QAAQ,YAAY,YAAY,MAAM;AACzC,YAAQ,IAAI,YAAY;AACxB,WAAO,QAAQ,KAAK;AAAA,MAChB;AAAA,MACA,CAAC,UAAU;AACP,eAAO,QAAQ,KAAK;AAAA,UAChB,EAAC,GAAG,gBAAgB,GAAG,MAAK;AAAA,UAC5B,MAAM;AACF,oBAAQ,IAAI,qBAAqB;AAAA,UACrC;AAAA,QACJ;AAAA,MACJ;AAAA,IACJ;AAAA,EAEJ,CAAC;AAED,MAAI,iBAAiB,CAAC;AAEtB,SAAO,QAAQ,UAAU;AAAA,IACrB,SAAS,SAA2B,QAAQ,cAAc;AACtD,cAAQ,IAAI,WAAW;AACvB,cAAQ,IAAI,OAAO;AACnB,cAAQ,QAAQ,QAAQ;AAAA;AAAA,QACpB;AACI,cAAI,MAAM,OAAO,QAAQ,OAAO,sBAAsB;AAKtD,2BAAiB;AACjB,iBAAO,KAAK,OAAO,EAAC,IAAG,CAAC,EAAE,KAAK,SAAO;AAClC,oBAAQ,IAAI,cAAc;AAAA,UAC9B,CAAC;AACD;AAAA,QACJ;AACI,kBAAQ,IAAI,aAAa;AAGzB,uBAAa,cAAc;AAC3B;AAAA,MACR;AAAA,IACJ;AAAA,EACJ;",
  "names": []
}
